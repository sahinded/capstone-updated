In this project, I would like to predict possibility of catching second flight when there is a delay on domestic airline. Arrival delay can cause a problem to catch a connected flight. If there is a departure delay, there is a possibility not to have an arrival delay because of reducing elapse time on the air, but there is also possibility to have an arrival delay. There are different reasons to have arrival delay such that weather, departure delay, crowd of airport etc... Arrival delay becomes more important if you have another flight to catch since it can be messed up all of your plans. Everyone who are travelling by plane have at least one missing flight experience since now, it causes not only loss money, time but also it is frustrating. 

Think about if you know your flight will be cancelled or do not have chance to catch your connected flight before departuring of your first flight, everything will be changed. For example if we have the following scenerio, there will be severe weather condition on the place where your connected flight on, and possibility of delay is 98%, you can cancel your flight instead of incearesing your travel time since it causes stress and paying extra money for food, hotel etc. My capstone project helps you to predict to catch your connected flight on this kind of circumtances. 


THE DATA:
The first data that used from the Kaggle https://www.kaggle.com/datasets/yuanyuwendymu/airline-delay-and-cancellation-data-2009-2018 and this data set name is airline Delay and Cancellation Data between 2009-2018 and I specifically choose a year 2018 since it is the most recent year before the pandemic. The data consists of 7213446 observations and 28 features. The second data that used from Kaggle https://www.kaggle.com/code/viktormhk/us-airports-by-weather as well.The size of the data is (6274206,13). This data set helps me to check the weather data by airports location but the airport name given as a airportcode so I need another data to determine airport name by using airportcode and I will be able to use the weather severity on my project. I got this new data from Kaggle https://www.kaggle.com/datasets/thoudamyoihenba/airports. Finally, when I merged all the data frames, I missed a lot of information in the given time frame since most the weather data does not just contain weather event. When the weather is clear, the data does not give any information. These cause to lose most of my data and does not give an accurate result after using machine learning modeling. To avoid lose of data, I checked https://www.weather.gov/wrh/Climate?wfo=okx webpage to see weather conditions on the specific time frame which is not on my weather data and I see during these time frames, the weather was clear.

PRE-PROCESSING:
After analyzing data, some features will not be contribute in the prediction. I start to cleaning the data by dropping these columns from the first data. In my project, I predict the connected delay for the specific airport. When I checked some airports such as IAD, EWR etc. EWR which is Newark Airport has delayed flight almost one third of the all flights, that is why I choose this airport for the Origin and destination for my project. If the flight arrives on time, it prevents to chance of possible missing flight. So, consider less than 10 min ARR_DELAY is an on time arrival. Then, built a dummy column based on ARR_DELAY time and ORIGIN  is EWR to have a binary classification. I also want to add weather delay since if there is weather delay, passenger needs to pay all expenseses such as staying, food etc. by themselves so it is one of the important contributation for the prediction. I need second data for adding the weather events since for the first data does not give a lot of information about it. In the second data, there are some weather event featues in the given time frames such as eventid, type, severity, starttime(UTC), endtime(UTC), but it does not give any information about the airport name. Instead of giving the airport name, it gives airportcode, lattitude and longtitude, city, country, state and zipcode. After searching airport codes, I found EWR has airport code KEWR and I filtered this dataframe by choosing KEWR. I need to merge the dataframes however there is no common column that is why I use another dataframe which has IATA and ICAO columns. ICAO feature is the same with airportcode on the second data. After matching, filtering and cleaning these two data sets, I merged them together and have the data df1_clean. Now, before starting modeling, I need to merged my first dataset which has dummy columns for binary classification and the df1_clean which gives an information for the weather and airport. By using an event function, I matched the IATA from df1_clean data and ORIGIN from the first data ad also match the flight time within the time frame from df1_clean. After this, I obtained new dataset which has all the features from the all the dataframes is called df_clean.

MODEL:
Before starting the modelling, I will break all our variables into the categorical and numerical features. Categorical features to contribute the prediction are weatherevent and weatherseverity. On the other hand, numerical features are FL_DATE, WEATHER_DELAY, Delayed, Airport, flight_time. After splitting the features into the numerical and categorical features, I want to make sure that these features does not contain any missing values. I am implementing the onehot encoding for the categorical features. Then I apply the get_dummies function on the categorical features. AI tried different types of  modelingsuch as baseline modelings, KNeighborsClassifier and KNeighborsClassifier fits better as can be seen on ROC curve.
